<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/brum-global-variable/index.html">
<link rel="import" href="../store/store.html">
<link rel="import" href="../actions/user.html">
<link rel="import" href="./components/main/template/main_template.html">

<dom-module id="kruskontroll-app">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <h1>Your username is [[username]]!</h1>
    
    <main-template></main-template>

  </template>

  <script>
    /**
     * @customElement
     * @polymer
     */
    class KruskontrollApp extends ReduxStore(Polymer.Element) {
      static get is() { return 'kruskontroll-app'; }
      ready() {
        super.ready();

        window.setTimeout(() => {
          this.dispatch({
            type: 'UPDATE_USERNAME',
            payload: {
              name: 'Bjarte',
            },
          });
        }, 5000);
      }
      static get properties() {
        return {
          active: {
            type: String,
            value: "false",
          },
          prop1: {
            type: String,
            value: 'kruskontroll-app'
          },
          username: {
            type: String,
            statePath: 'user.name',
          },
          message: {
            type: String,
            statePath: 'testReducer.message'
          }
        };
      }
    }
    
    window.customElements.define(KruskontrollApp.is, KruskontrollApp);
  </script>
</dom-module>
